digraph DB {
  /**
   * Links
   *
   * - [Color Names | Graphviz](http://graphviz.org/content/color-names)
   *
   * How to make
   *
   * ```zsh
   * % dot -T png er.dot > er.png; feh er.png
   * ```
   */

  // Style
  graph [fontname = "DejaVuSansMono"; fontsize = 9];
  node  [fontname = "DejaVuSansMono"; fontsize = 9];
  edge  [fontname = "DejaVuSansMono"; fontsize = 9];

  // Node
  node [ // object
    shape   = record
    rankdir = LR
  ]

  _Legend [
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr>
        <td border="1" align="center" bgcolor="lightgray"><b>HEADER COLOR</b></td>
        <td border="1" align="center" bgcolor="lightgray"><b>TYPE</b></td>
      </tr>
      <tr>
        <td border="1" align="center" bgcolor="whitesmoke">whitesmoke</td>
        <td border="1" align="left" bgcolor="white">normal object</td>
      </tr>
      <tr>
        <td border="1" align="center" bgcolor="mistyrose1">mistyrose1</td>
        <td border="1" align="left" bgcolor="white">soft (logical) del.</td>
      </tr>
      <tr>
        <td border="1" align="center" bgcolor="lightcyan1">lightcyan1</td>
        <td border="1" align="left" bgcolor="white">soft (logical) del. + nullify</td>
      </tr>
      <tr>
        <td border="1" align="center" bgcolor="gray60">gray60</td>
        <td border="1" align="left" bgcolor="white">hard (physical) del.</td>
      </tr>
    </table>>
    shape     = "none"
    style     = "filled"
    margin    = "0.13,0.13"
    fontcolor = "black"
    fillcolor = "honeydew3"
  ]

  User [
    // signed up user
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="gray60">users</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
«User»<br align="left"/>
has_one: account<br align="left"/>
has_many: user_emails (as emails)<br align="left"/>
has_many: projects (via membership)<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">name</td>
        <td border="1" align="left">string (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">username</td>
        <td border="1" align="left">string (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">email</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">password</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">activation_state</td>
        <td border="1" align="left">enum (0)</td>
        <td border="1" align="left">0:pending,1:active</td>
      </tr>
      <tr>
        <td border="1" align="left">reset_password_token</td>
        <td border="1" align="left">string (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">reset_password_token_expires_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">reset_password_token_sent_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  UserEmail [
    // user's emails
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="gray60">user_emails</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
«User»<br align="left"/>
belongs_to: user<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">email</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">type</td>
        <td border="1" align="left">enum (0)</td>
        <td border="1" align="left">0:primary,1:normal</td>
      </tr>
      <tr>
        <td border="1" align="left">activation_state</td>
        <td border="1" align="left">enum (0)</td>
        <td border="1" align="left">0:pending,1:active</td>
      </tr>
      <tr>
        <td border="1" align="left">activation_token</td>
        <td border="1" align="left">string (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">activation_token_expires_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Account [
    // user account
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="mistyrose1">accounts</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Account<b>»</b><br align="left"/>
belongs_to: user<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">user_id</td>
        <td border="1" align="left">integer (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">deleted_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Contribution [
    // relation for user and article
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="mistyrose1">contributions</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Contribution<b>»</b><br align="left"/>
belongs_to: article<br align="left"/>
belongs_to: user<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">article_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">user_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">role</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left">
0:primary_author,1:author,2:proofreader,3:cooperator,4:translator,<br/>
5:translator_supervisor,6:compiler,7:supervisor</td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Membership [
    // relation for user and project
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="mistyrose1">memberships</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Membership<b>»</b><br align="left"/>
belongs_to: user<br align="left"/>
belongs_to: project<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">user_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">project_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">role</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left">0:primary_owner, 1:owner, 2:member</td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Plan [
    // the plan for project
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="whitesmoke">plans</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Plan<b>»</b><br align="left"/>
has_many: projects<br align="left"/>
has_many: transactions<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">payment_type_id</td>
        <td border="1" align="left">smallint</td>
        <td border="1" align="left">(external id)</td>
      </tr>
      <tr>
        <td border="1" align="left">name</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">price</td>
        <td border="1" align="left">float (0.00)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">description</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Project [
    // the project
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="lightcyan1">projects</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Project<b>»</b><br align="left"/>
belongs_to: plan<br align="left"/>
has_many: users (`collaborators` via membership)<br align="left"/>
has_many: sites<br align="left"/>
has_many: transactions<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">access_key_id</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">plan_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">subscription_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left">(external id)</td>
      </tr>
      <tr>
        <td border="1" align="left">namespace</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">name</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">description</td>
        <td border="1" align="left">unicode (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">billing_state</td>
        <td border="1" align="left">enum (0)</td>
        <td border="1" align="left">0:none,1:pending,2:processing,3:valid</td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">deleted_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Site [
    // external publication
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="lightcyan1">sites</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Site<b>»</b><br align="left"/>
belongs_to: project<br align="left"/>
belongs_to: publication<br align="left"/>
belongs_to: application<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">project_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">domain</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">hosting_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">hosting_type</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left">{Publication,Application}</td>
      </tr>
      <tr>
        <td border="1" align="left">calculation_state</td>
        <td border="1" align="left">enum (0)</td>
        <td border="1" align="left">0:off,1:on</td>
      </tr>
      <tr>
        <td border="1" align="left">read_key</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">write_key</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">is_pinned</td>
        <td border="1" align="left">boolean (false)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">deleted_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Application [
    // the webpage belongs to (external) publication
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="lightcyan1">applications</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Application<b>»</b><br align="left"/>
has_one: site<br align="left"/>
has_many: pages<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">name</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">description</td>
        <td border="1" align="left">unicode (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">deleted_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Page [
    // the webpage belongs to application
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="lightcyan1">pages</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Page<b>»</b><br align="left"/>
belongs_to: application<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">application_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">code</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">path</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">title</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">scope</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left">0:public,1:private</td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">deleted_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Publication [
    // the publication which has articles
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="lightcyan1">publications</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Publication<b>»</b><br align="left"/>
belongs_to: classification<br align="left"/>
belongs_to: license<br align="left"/>
has_one: site<br align="left"/>
has_many: labels<br align="left"/>
has_many: articles<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">classification_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">name</td>
        <td border="1" align="left">unicode</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">description</td>
        <td border="1" align="left">unicode (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">license_id</td>
        <td border="1" align="left">integer (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">copyright</td>
        <td border="1" align="left">unicode</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">deleted_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Article [
    // published articles
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="lightcyan1">articles</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Article<b>»</b><br align="left"/>
belongs_to: publication<br align="left"/>
has_many: users (`contributors` via contribution)<br align="left"/>
has_many: labels<br align="left"/>
has_many: tags<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">publication_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">code</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">slug</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">title</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">scope</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left">0:public, 1:private</td>
      </tr>
      <tr>
        <td border="1" align="left">license_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">copyright</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">progress_state</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left">
0:draft,1:wip,2:ready,3:accepted,4:scheduled,<br/>
5:published,6:rejected,7:archived</td>
      </tr>
      <tr>
        <td border="1" align="left">published_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">deleted_at</td>
        <td border="1" align="left">datetime (null)</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Classification [
    // the classification of bublication (UDC)
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="whitesmoke">classifications</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Classification<b>»</b><br align="left"/>
has_many: publications<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">parent_id</td>
        <td border="1" align="left">integer (null)</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">notation</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">name</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">date</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Label [
    // labels for articles by publication
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="gray60">labels</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Label<b>»</b><br align="left"/>
belongs_to: publication<br align="left"/>
has_many: articles (via labelling)<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">publication_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">name</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">color</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">description</td>
        <td border="1" align="left">text</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Tag [
    // global tags on application
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="gray60">tags</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Tag<b>»</b><br align="left"/>
has_many: articles<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">name</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">count</td>
        <td border="1" align="left">integer (0)</td>
        <td border="1" align="left">taggings count</td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Transaction [
    // histories of payment transactions
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="mistyrose1">transactions</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>Transaction<b>»</b><br align="left"/>
belongs_to: account<br align="left"/>
belongs_to: plan<br align="left"/>
belongs_to: project<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">account_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">project_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">subscription_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left">(external id)</td>
      </tr>
      <tr>
        <td border="1" align="left">plan_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  edge [ // table
    shape   = record
    rankdir = LR
  ]

  Labelling [
    // relation for label and some objects (labelable)
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="gray60">labellings</td></tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">label_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">labelable_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">labelable_type</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left">{Article}</td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = "filled"
    margin    = "0"
    fontcolor = "black"
    fillcolor = "whitesmoke"
  ]

  License [
    // the licenses for publication and article
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="whitesmoke">licenses</td></tr>
      <tr>
        <td border="1" colspan="3" align="left">
<b>«</b>License<b>»</b><br align="left"/>
has_many: publications<br align="left"/>
has_many: articles<br align="left"/>
        </td>
      </tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">identifier</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">fullname</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">url</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = ""
    margin    = "0"
    fontcolor = "black"
    fillcolor = ""
  ]

  Tagging [
    // relation for tag and objects (taggable)
    label = <<table border="0" cellspacing="0" cellpadding="3">
      <tr><td border="1" colspan="3" align="center" bgcolor="gray60">taggins</td></tr>
      <tr>
        <td border="1" align="center"><b>FIELD</b></td>
        <td border="1" align="center"><b>TYPE</b></td>
        <td border="1" align="center"><b>VALUE</b></td>
      </tr>
      <tr>
        <td border="1" align="left">tag_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">taggable_id</td>
        <td border="1" align="left">integer</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">taggable_type</td>
        <td border="1" align="left">string</td>
        <td border="1" align="left">{Article}</td>
      </tr>
      <tr>
        <td border="1" align="left">created_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
      <tr>
        <td border="1" align="left">updated_at</td>
        <td border="1" align="left">datetime</td>
        <td border="1" align="left"></td>
      </tr>
    </table>>
    shape     = "none"
    style     = "filled"
    margin    = "0"
    fontcolor = "black"
    fillcolor = "whitesmoke"
  ]

  // Relation
  edge [ // belongs_to -> has_many
    arrowhead = empty
    arrowtail = odiamond
    headlabel = "1"
    taillabel = "0..n"
    dir       = both
  ]

  UserEmail -> User

  Membership -> User
  Membership -> Project

  Article  -> Publication
  Page     -> Application

  Article  -> License

  Contribution -> Article
  Contribution -> User

  Publication -> Classification
  Publication -> License
  Label -> Publication

  Tagging -> Tag
  Tagging -> Article

  Site -> Project

  Project -> Plan

  Transaction -> Account
  Transaction -> Plan
  Transaction -> Project

  edge [ // belongs_to -> has_one
    arrowhead = empty
    arrowtail = none
    headlabel = "1"
    taillabel = "1"
    dir       = both
  ]

  Site -> Publication
  Site -> Application

  Account -> User

  edge [ // has_many <-> has_many
    arrowhead = odiamond
    arrowtail = odiamond
    headlabel = ""
    taillabel = ""
    dir       = both
  ]

  edge [ // has_many
    arrowhead = odiamond
    arrowtail = none
    headlabel = ""
    taillabel = ""
    dir       = both
  ]

  edge [ // belongs_to
    arrowhead = empty
    arrowtail = none
    headlabel = "1"
    taillabel = ""
    dir       = both
  ]

  Labelling -> Label
  Labelling -> Article

  edge [ // has_one
    arrowhead = normal
    arrowtail = none
    headlabel = ""
    taillabel = ""
    dir       = both
  ]

  // Layout
  {rank = same; _Legend};
  {rank = same; User, UserEmail};
  {rank = same; Account};
  {rank = same; Classification, Label};
  {rank = same; Article, Page};
  {rank = same; Membership, Contribution};
  {rank = same; Tag};
  {rank = same; Plan, License};
  {rank = same; Publication, Application};
  {rank = same; Project, Site};
  {rank = same; Transaction};
  {rank = same; Labelling, Tagging};
}
